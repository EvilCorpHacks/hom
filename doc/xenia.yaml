swagger: '2.0'
info:
  title: Xenia
  description: API per Xenia
  version: "1.0"
host: localhost:9000
schemes:
  - http
basePath: /xenia
produces:
  - application/json


####################################
########### DEFINITIONS ############

definitions:

  evacueeCategory:
    type: string
    enum: &evacueeCategory
      - pregnant
      - handicapped
      - child
      - teen
      - adult
      - elder


  address:
    type: object
    properties:
      id:
        type: string
      text:
        type: string
      phone:
        type: string
      city:
        type: string
      state:
        type: string
      zip:
        type: string
      country:
        type: string
      latitude:
        type: number
      longitude:
        type: number


  assignment:
    type: object
    properties:
      id:
        type: string
      timestamp:
        type: number
      structure_id:
        type: string
      evacuee_id:
        type: string


  structure:
    type: object
    properties:
      id:
        type: string
      name:
        type: string
      address:
        $ref: "#/definitions/address"
      description:
        type: string
      total_seats:
        type: number
      available_seats:
        type: number
      available: # tenerlo?
        type: boolean
      active:
        type: boolean


  volunteer:
    type: object
    properties:
      id:
        type: string
      name:
        type: string
      surname:
        type: string
      fiscal_code:
        type: string
      address:
        $ref: "#/definitions/address"
      structures:
        type: array
        items:
          $ref: "#/definitions/structure"
      note:
        type: string


  evacuee:
    type: object
    properties:
      id:
        type: string
      name:
        type: string
      surname:
        type: string
      fiscal_code:
        type: string
      address:
        $ref: "#/definitions/address"
      category:
        $ref: "#/definitions/evacueeCategory"
      group:
        type: array
        items:
          $ref: "#/definitions/simpleEvacuee"


  simpleEvacuee:
    type: object
    properties:
      id:
        type: string
      name:
        type: string
      surname:
        type: string
      fiscal_code:
        type: string
      address:
        $ref: "#/definitions/address"
      category:
        $ref: "#/definitions/evacueeCategory"


####################################
############## PATHS ###############


paths:
  '/volunteer/':
    get:
      produces:
        - application/json
      responses:
        200:
          description: lista dei volontari
          schema:
            type: object
            properties:
              items:
                type: array
                items:
                  $ref: '#/definitions/volunteer'
    post:
      parameters:
        - name: order
          in: body
          description: Ordine da aggiungere
          required: true
          schema:
            $ref: '#/definitions/volunteer'
      consumes:
        - application/json
      produces:
        - application/json
      responses:
        200:
          description: singolo volontari
          schema:
            $ref: '#/definitions/volunteer'
  '/volunteer/{volunteerId}':
    get:
      produces:
        - application/json
      parameters:
      - name: volunteerId
        in: path
        required: true
        type: string
      responses:
        200:
          description: singolo volontario
          schema:
            type: object
            properties:
              volunteer:
                $ref: '#/definitions/volunteer'